# ë„¤íŠ¸ì›Œí¬ ìŠ¤ìºë„ˆ

RustScan + Nmapì„ ì¡°í•©í•œ **2-phase ë„¤íŠ¸ì›Œí¬ ìŠ¤ìºë„ˆ**.

## íŠ¹ì§•

- **ğŸš€ ë¹ ë¥¸ í¬íŠ¸ ìŠ¤ìº”**: RustScanìœ¼ë¡œ ì´ˆê³ ì† í¬íŠ¸ ë°œê²¬
- **ğŸ” ìƒì„¸ ë¶„ì„**: Nmapìœ¼ë¡œ ë²„ì „/ìŠ¤í¬ë¦½íŠ¸ ìŠ¤ìº” (-sV -sC)
- **ğŸ“Š ê°„ê²°í•œ ì¶œë ¥**: nmap í˜•ì‹ ê²°ê³¼ë§Œ ìƒì„± (ì¤‘ê°„ íŒŒì¼ ì—†ìŒ)
- **âš¡ WSL ìµœì í™”**: ì•ˆì •ì ì¸ íŒŒë¼ë¯¸í„° ì‚¬ìš©

## 2-Phase êµ¬ì¡°

```
Phase 1: Host Discovery
  â””â”€ nmap -sn (T4, min-rate=10000) â†’ alive_hosts.txt, dead_hosts.txt

Phase 2: Port Scan + Service Detection
  â””â”€ rustscan â†’ nmap -sV -sC (T4) â†’ scan_*.nmap (ê° IPë³„)
```

## ì‚¬ìš©ë²•

### 1. ì„¤ì¹˜

**ì „ì²´ ì„¤ì¹˜ ê°€ì´ë“œ**: [SETUP.md](SETUP.md) ì°¸ì¡°

```bash
# ì˜ì¡´ì„± í™•ì¸ ë° ìë™ ì„¤ì¹˜ (ê¶Œì¥)
./check_deps.sh --install

# ë˜ëŠ” í™•ì¸ë§Œ
./check_deps.sh

# Python íŒ¨í‚¤ì§€ (ì„ íƒì‚¬í•­, í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš©)
uv sync  # ë˜ëŠ” pip install -r requirements.txt
```

**ì£¼ìš” ì˜ì¡´ì„±**:
- Python 3.10+
- RustScan 2.0+
- Nmap 7.80+

### 2. íƒ€ê²Ÿ ì„¤ì •

`targets.json` ìƒì„± (ë£¨íŠ¸ ë””ë ‰í† ë¦¬):

```json
{
  "subnets": [
    "192.168.1.0/24",
    "10.0.0.0/24"
  ],
  "exclude": [
    "192.168.1.1",
    "10.0.0.1"
  ]
}
```

**ì°¸ê³ **: `targets.json.example`ì„ ë³µì‚¬í•˜ì—¬ ìˆ˜ì •í•˜ì„¸ìš”.

### 3. ì‹¤í–‰

```bash
# ê¸°ë³¸ ì‹¤í–‰ (targets.json ì‚¬ìš©)
python main.py

# ë˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ íŒŒì¼ ì§€ì •
python main.py --json-file targets.json

# ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ í˜¸ì¶œ
uv run scripts/rustscan_massive.py --json-file targets.json
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
.
â”œâ”€â”€ main.py                      # ì§„ì…ì  (ê°„ë‹¨í•œ ë˜í¼)
â”œâ”€â”€ targets.json.example         # íƒ€ê²Ÿ ì„¤ì • ì˜ˆì œ
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ rustscan_massive.py      # ë©”ì¸ ë¡œì§
â”‚   â”œâ”€â”€ phases/                  # 2ë‹¨ê³„ êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ phase1.py            # Health Check
â”‚   â”‚   â””â”€â”€ phase2.py            # Detailed Scan
â”‚   â”œâ”€â”€ scanner/                 # ìŠ¤ìºë„ˆ ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ config.py            # ì„¤ì • (6ê°œ í•„ë“œ)
â”‚   â”‚   â”œâ”€â”€ logger.py            # ë¡œê¹…
â”‚   â”‚   â””â”€â”€ scanner.py           # ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚   â””â”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ subprocess_runner.py # ë¹„ë™ê¸° subprocess ì‹¤í–‰
â”‚       â”œâ”€â”€ json_loader.py       # targets.json ë¡œë”
â”‚       â””â”€â”€ rtt_optimizer.py     # RTT ê¸°ë°˜ íŒŒë¼ë¯¸í„° ìµœì í™”
â””â”€â”€ scans/                       # ìŠ¤ìº” ê²°ê³¼ (gitignore)
```

## ì¶œë ¥ ê²°ê³¼

```
scans/rustscan_massive_YYYYMMDD_HHMMSS/
â”œâ”€â”€ alive_hosts.txt       # ì‚´ì•„ìˆëŠ” IP ëª©ë¡
â”œâ”€â”€ dead_hosts.txt        # ì£½ì€ IP ëª©ë¡
â””â”€â”€ scan_*.nmap           # ê° IPë³„ nmap ìƒì„¸ ìŠ¤ìº” ê²°ê³¼
```

**ì¶œë ¥ íŒŒì¼ íŠ¹ì§•**:
- **nmap í˜•ì‹**: í‘œì¤€ nmap ì¶œë ¥ (`-oN`)
- **ì¤‘ê°„ íŒŒì¼ ì—†ìŒ**: XML, JSON, í¬íŠ¸ ë§µ ë“± ì œê±°
- **ë‹¨ìˆœí•¨**: 3ì¢…ë¥˜ íŒŒì¼ë§Œ ìƒì„±

## ì„¤ì •

`scripts/scanner/config.py`ì˜ `Config` í´ë˜ìŠ¤:

```python
@dataclass
class Config:
    script_dir: Path       # ìŠ¤í¬ë¦½íŠ¸ ë””ë ‰í† ë¦¬
    scan_dir: Path         # ìŠ¤ìº” ê²°ê³¼ ë””ë ‰í† ë¦¬
    json_file: Path        # targets.json ê²½ë¡œ
    subnets: list[str]     # ìŠ¤ìº”í•  ì„œë¸Œë„· ëª©ë¡
    exclude_ips: list[str] # ì œì™¸í•  IP ëª©ë¡
    sudo_password: str     # sudo ë¹„ë°€ë²ˆí˜¸
```

**RustScan íŒŒë¼ë¯¸í„°**:
- `batch_size`: 10000
- `timeout`: 2000ms
- `parallel_limit`: 5 (ë™ì‹œ ì‹¤í–‰ ì œí•œ)
- `ulimit`: 55000

**Nmap íŒŒë¼ë¯¸í„°** (Phase 2):
- `-T4`: ê³µê²©ì  íƒ€ì´ë°
- `-sV -sC`: ë²„ì „ ê°ì§€ + NSE ìŠ¤í¬ë¦½íŠ¸ (OS ê°ì§€/traceroute ì œê±°)
- `-n`: DNS ë¹„í™œì„±í™”
- `--max-retries 2`: ì¬ì‹œë„ ìµœì†Œí™”
- `--host-timeout 240s`: ê°œë³„ í˜¸ìŠ¤íŠ¸ 4ë¶„ ì œí•œ
- `-v`: ìƒì„¸ ì¶œë ¥

## ìš”êµ¬ì‚¬í•­

- **Python**: 3.10+
- **RustScan**: 2.0+
- **Nmap**: 7.80+
- **uv**: Python íŒ¨í‚¤ì§€ ê´€ë¦¬ (ê¶Œì¥)

## âš ï¸ ë²•ì  ê³ ì§€ì‚¬í•­

**ì´ ë„êµ¬ëŠ” ìŠ¹ì¸ëœ ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.**

- ë¬´ë‹¨ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº”ì€ **ë¶ˆë²•**ì´ë©°, ì»´í“¨í„° ë²”ì£„ë¡œ ì²˜ë²Œë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì‚¬ìš© ì „ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ìì˜ **ëª…ì‹œì  ì„œë©´ ìŠ¹ì¸** í•„ìˆ˜
- êµìœ¡ ëª©ì  ë° ìì²´ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©
- ëª¨ë“  ë²•ì  ì±…ì„ì€ ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤

## ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

1. **sudo ë¹„ë°€ë²ˆí˜¸**: í™˜ê²½ë³€ìˆ˜ `SUDO_PASSWORD` ë˜ëŠ” í”„ë¡¬í”„íŠ¸ ì…ë ¥
2. **targets.json**: `.gitignore`ì— í¬í•¨ë¨ (ë¯¼ê° ì •ë³´ ìœ ì¶œ ë°©ì§€)
3. **ìŠ¤ìº” ê¶Œí•œ**: ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº”ì€ ê¶Œí•œì´ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ìˆ˜í–‰

## ë¼ì´ì„ ìŠ¤

MIT

## ê¸°ì—¬

Pull Request í™˜ì˜í•©ë‹ˆë‹¤!

## ë³€ê²½ ì´ë ¥

### v2.1.0 (2026-02-13)
- **Phase 1**: fping ì œê±°, nmap -sn ë‹¨ì¼ ì—”ì§„ (T4, min-rate=10000)
- **Phase 2**: `-A` â†’ `-sV -sC` (OS ê°ì§€/traceroute ì œê±°), T3â†’T4, rustscan timeout 5000â†’2000ms
- **ì„±ëŠ¥**: Phase 2 ìŠ¤ìº” ì†ë„ ê°œì„ , `--host-timeout 240s`ë¡œ ì•ˆì •ì„± ê°•í™”

### v2.0.0 (2026-02-12)
- **ë¦¬íŒ©í† ë§**: 4-phase â†’ 2-phase êµ¬ì¡°ë¡œ ë‹¨ìˆœí™”
- **ì œê±°**: Phase 3-4, checkpoint, ë¸Œë£¨íŠ¸í¬ìŠ¤, Playwright, ë¦¬í¬íŠ¸ ìƒì„±
- **ê°œì„ **: nmap pass-through í™œìš©, ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©, ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
- **ìµœì í™”**: ì½”ë“œ ë¼ì¸ ìˆ˜ 81% ê°ì†Œ (~800ì¤„ â†’ ~150ì¤„)

### v1.0.0
- ì´ˆê¸° ë¦´ë¦¬ìŠ¤ (4-phase êµ¬ì¡°)
